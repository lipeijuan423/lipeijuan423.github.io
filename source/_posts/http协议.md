---
title: http协议
date: 2019-06-06 22:35:45
tags:
---

### http 是超文本协议
> HTTP(HyperText Transfer Protocol)是一套计算机通过网络进行通信的规则 - 从www浏览器传输到web服务器到一种传输协议 - 从客户机到服务器到请求和从服务器到客户机的响应进行约束和规范
- 无状态 指web浏览器和web服务器不需要建立持久连接，不保留信息（如果记录用户状态，需要用到session[由cookie->加密cookie->session->服务器存session,过程中还可能会被篡改]）
- 遵循请求/应答模型 web浏览器向web服务器发送请求，web服务器返回应答
- 内容类型 服务器返回的文件有类型 （json, html，二进制文件）
### 浏览器行为与http协议 -- 图解
![Image test](/static/浏览器行为与http协议.png)
## 基础
### 五层架构
> OSI: Open System Interconnect 开发式系统互联
  - osi七层模型
    - 应用层： 文件传输、电子邮件、文件服务，虚拟终端 TFTP，HTTP，SNMP，FTP，SMTP，DNS，Telnet 【操作系统或网络应用程序提供访问网络服务的接口】
    - 表示层： 数据格式化，代码转换，数据加密 没有协议【即提供格式化的表示和转换数据服务。数据的压缩和解压缩， 加密和解密等工作都由表示层负责】
    - 会话层： 解除或建立与别的接点的联系 没有协议【报文，提供包括访问验证和会话管理在内的建立和维护应用之间通信的机制 ，如服务器验证用户登录】
    - 传输层： 提供端对端的接口 TCP，UDP 【TCP的数据单元称为段 （segments）而UDP协议的数据单元称为“数据报（datagrams）”，负责获取全部信息】
    - 网络层： 为数据包选择路由 IP，ICMP，RIP，OSPF，BGP，IGMP 
    - 数据链路层： 传输有地址的帧以及错误检测功能 SLIP，CSLIP，PPP，ARP，RARP，MTU 【数据的单位称为帧（frame）】
    - 物理层： 以二进制数据形式在物理媒体上传输数据
  - TCP/IP 五层网络架构
    - 应用层 
    - 传输层 
    - 网络层 
    - 数据链路层 
    - 物理层 

### TCP/IP协议簇
> 协议簇包括很多协议，因为TCP、ip重要，以此命名
> TCP/IP协议集包括应用层,传输层，网络层，网络访问层
> 简单包括：
 - 应用层
  1、超文本传输协议（HTTP）:万维网的基本协议；
  2、文件传输（TFTP简单文件传输协议）；
  3、远程登录（Telnet），提供远程访问其它主机功能, 它允许用户登录internet主机，并在这台主机上执行命令；
  4、网络管理（SNMP简单网络管理协议），该协议提供了监控网络设备的方法， 以及配置管理,统计信息收集,性能管理及安全管理等；
  5、域名系统（DNS），该系统用于在internet中将域名及其公共广播的网络节点转换成IP地址。
  - 网络层
  1、Internet协议（IP）；
  2、Internet控制信息协议（ICMP）；
  3、地址解析协议（ARP）；
  4、反向地址解析协议（RARP）。
  - 网络访问层
  IP地址与物理地址硬件的映射， 以及将IP封装成帧.基于不同硬件类型的网络接口，网络访问层定义了和物理介质的连接

### TCP
> TCP（Transmission Control Protocol，传输控制协议）是面向连接的协议.在收发数据前，必须和对方建立可靠的连接
> 三次握手
> 四次挥手
> 名词解释
1、ACK 是TCP报头的控制位之一，对数据进行确认。确认由目的端发出， 用它来告诉发送端这个序列号之前的数据段都收到了。 比如确认号为X，则表示前X-1个数据段都收到了，只有当ACK=1时,确认号才有效，当ACK=0时，确认号无效，这时会要求重传数据，保证数据的完整性。

2、SYN 同步序列号，TCP建立连接时。

3、FIN 发送端完成发送任务位，当TCP完成数据传输需要断开时,提出断开连接的一方。
> 优点
> 缺点
> 使用场景：
### UDP
> UDP是一个非连接的协议，传输数据之前源端和终端不建立连接
> 优点
> 缺点
> 使用场景
> ping（测试两台主机之间TCP/IP通信是否正常）的原理： 向对方主机发送UDP数据包，然后对方主机确认收到数据包， 如果数据包是否到达的消息及时反馈回来，那么网络就是通的
### UDP和TCP有什么区别
1、基于连接与无连接；

2、对系统资源的要求（TCP较多，UDP少）；

3、UDP程序结构较简单；

4、流模式与数据报模式 ；

5、TCP保证数据正确性，UDP可能丢包；

6、TCP保证数据顺序，UDP不保证。
### http通信机制： 
## 包含内容
### url 和 uri
### 请求头/响应头
> 报文
### 状态码

## 相关应用
### 用户鉴权方式-解决前端安全
### cookies vs session
### 缓存机制

### http与反向代理
### 负载均衡

### nginx
## 版本比较
### http1 vs http1.1 vs http2.0 vs http3

### 问题
> 为什么TCP协议是三次握手

链接：
  - http相关:http://jartto.wang/2016/08/04/Rudimentary-http-protocol/
  - 五层协议：https://blog.csdn.net/huangjin0507/article/details/51613561
  - TCP/UDP: https://zhuanlan.zhihu.com/p/24860273
